---
title: 走进mysql基础
date: 2018-01-31 23:27:14
tags: mysql
---

# 前言

作为后端猿的我们，大多数每天都会和mysql打交道。除了每天写不腻的curd语句，关于mysql我们应该要了解它的那些特性呢？本文将采用问答的形式简单明了的陈述我所了解的各个知识点。

# 直入主题

### 画出mysql的逻辑架构图？

### mysql常见的引擎有哪些，区别是什么？

- InnoDB
    + 支持事务
    + 行锁
    + 聚簇索引
        * 引申问题：什么是聚簇索引？索引存放实际数据。
- MyISAM
    + 不支持事务
    + 表锁
    + 崩溃无法安全恢复
    + 非聚簇索引
        * 引申问题：什么是非聚簇索引？索引存放数据地址。
- Memory
    + 基于内存
    + 表锁
    + 字段长度固定，不支持blob,text, 即使指定vachar实际储存也会转为char
- Archive
    + 只支持insert/select操作
    + 适合日志等

### 什么是事务的ACDI概念？

- A: Atomicity, 原子性,　一个事务的所有操作视为一个整体，要不全部成功，要不全部失败。
- C: Consistency, 一致性,　一个事务下的所有的数据状态变更，只有事务提交成功才全部变更。
- D: Durability, 持久性,　一旦事务提交成功，产生的数据变更将永久保存在数据库中。
- I: Isolation, 隔离性,　一个事务再提交之前对其他事务不可见。

### 什么是脏读，幻读，不可重复读？

- 脏读：读取未提交事务的数据，数据可能被回滚，不符合隔离性的定义。
- 幻读：一个事务批量读取了一批数据时，另一个事务提交了新的数据，当之前的事务再次读取时，会产生幻影行。
- 不可重复读：执行两次相同的查询，可能得到不同的结果。

### mysql事务的隔离级别有哪些？默认的隔离级别是什么？

- 未提交读：一个事务还未提交，另一个事务就可以读取，这样导致的后果，脏读。
- 提交读(又叫，不可重复读)：一个事务未提交对其他事务不可见，但是会产生幻读和不可重复读。
- 可重复读(mysql默认隔离级别)：保证同一个事务下多次读取的结果一致，但是会产生幻读。
- 可串行化：严格的串行阻塞，并发能力不好。

| 隔离级别 | 脏读 | 不可重复读 | 幻读 |
| --- | --- | --- | --- |
| Read Uncommitted | √ | √  | √ |
| Read Committed | × | √ | √ |
| Repeatable Read | × | × | √ |
| Serializable | × | × | × |

### 什么是MVCC？简述MVCC的作用及原理？

MVCC：Multi Version Concurrency Control,　多版本并发控制。mysql防止幻读的一种技术手段，

### 死锁是怎么出现的，并写出简单示例？

### 什么是聚簇索引和非聚簇索引？

### 什么是覆盖索引？

### InnoDB为什么不采用红黑树而采用B+树作为索引存放数据结构，并简要画出B+树？

# 结语
